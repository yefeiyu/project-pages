<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-10-23 Sun 13:30 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>在github中搭建用org-mode和org2jekyll发布及用lunr.js中文搜索的jekyll静态独立博客</title>
<meta name="author" content="yefeiyu" />
<meta name="description" content="New blog build" />
<meta name="generator" content="Org Mode" />
<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#ffffff">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/toc.css"/>
<link rel="stylesheet" href="/style/tufte.css"/>
<link rel="stylesheet" href="/style/main.css"/>
<link rel="alternate" type="application/rss+xml" href="https://gongzhitaao.org/orgcss/org.css"/>
<link rel="stylesheet" type="text/css" href="https://gongzhitaao.org/orgcss/org.css"/>
</head>
<body>
<div id="preamble" class="status">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJRFJGX"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<header>
    <a accesskey="h" href="/index.html"> HOME </a> |
    <a href="#" id="edit-in-github">EDIT</a> |
    <a href="https://yefeiyu.github.io/index.xml">RSS</a> |
    <a accesskey="H" href="/about.html">ABOUT</a> |
    <a href="https://github.com/yefeiyu">GITHUB</a>
</header>
</div>
<div id="content" class="content">
<header>
<h1 class="title">在github中搭建用org-mode和org2jekyll发布及用lunr.js中文搜索的jekyll静态独立博客</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org52d2a0b">1. 基础搭建</a>
<ul>
<li><a href="#org9dc929f">1.1. 在http://www.github.com 上注册帐号，建立博客。</a></li>
<li><a href="#org2e05a5c">1.2. 生成ssh密钥，以备上传下载、文章发布。</a></li>
</ul>
</li>
<li><a href="#orgef6c007">2. 选择主题</a>
<ul>
<li><a href="#org72fec9e">2.1. 安装node.js</a></li>
<li><a href="#orga3b975d">2.2. 安装ruby。不建议使用vpm进行包安装。安装后自带gem</a></li>
<li><a href="#orged14cb5">2.3. 安装bundler</a></li>
<li><a href="#org4c62850">2.4. 安装npm</a></li>
<li><a href="#orgde62837">2.5. 安装诸多packages的时候，由于中国政府GFW的封杀，需要翻墙</a></li>
</ul>
</li>
<li><a href="#orge1b5315">3. 理清博客结构</a>
<ul>
<li><a href="#orgbfd79a3">3.1. 根目录</a></li>
<li><a href="#org89475d0">3.2. _app文件夹内容</a></li>
</ul>
</li>
<li><a href="#org2554b9d">4. 增加邮箱定阅</a></li>
<li><a href="#org3d31076">5. 增加rss定阅</a></li>
<li><a href="#orgdadab4d">6. 增加评论</a></li>
<li><a href="#orgf715a3f">7. 增加标签云</a>
<ul>
<li><a href="#org596398a">7.1. 在includes中建立tags_cloud文件</a></li>
<li><a href="#orgb6d53ea">7.2. 在_pages中建立tags.html文件</a></li>
<li><a href="#org1e520f6">7.3. 在/_includes/themes/curtana/includes中的css-variables.html中添加css的格式设置</a></li>
<li><a href="#org58c898e">7.4. 在_includes/themes/curtana/layouts的post.html中为每篇文章添加引用tag的模板</a></li>
</ul>
</li>
<li><a href="#org30fc46b">8. 添加中文搜索</a>
<ul>
<li><a href="#org7e4e830">8.1. 使用jekyll-lunr-js-search</a></li>
<li><a href="#org715ba24">8.2. 其他</a></li>
</ul>
</li>
<li><a href="#orga1be584">9. 使用org-mode撰写和发布</a>
<ul>
<li><a href="#org485aa6d">9.1. 博客直接使用.org文件</a></li>
<li><a href="#org792adcb">9.2. 自带.org文件转.html或.md文件</a></li>
<li><a href="#org246a129">9.3. 使用org2jekyll</a></li>
<li><a href="#org8df41db">9.4. 使用一键截图</a></li>
</ul>
</li>
<li><a href="#org1565a40">10. 简化发布流程</a></li>
</ul>
</div>
</nav>
<p>
<b>本教程旨在推荐一种可以从零开始，搭建一个简洁、快速，没有广告和令人眼花缭乱的界面，长期稳定、高效和易于访问并完全属于个人的独立博客。</b>
</p>
<ul class="org-ul">
<li><span class="underline">使用三大神器，github、emacs、org-mode</span></li>
<li><span class="underline">org格式直接生成html或md格式</span></li>
<li><span class="underline">结合aliases缩写命令行，可以一键发布</span></li>
<li><span class="underline">具备标签云功能</span></li>
<li><span class="underline">自建中文全文搜索</span></li>
</ul>
<div id="outline-container-org52d2a0b" class="outline-2">
<h2 id="org52d2a0b"><span class="section-number-2">1.</span> 基础搭建</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org9dc929f" class="outline-3">
<h3 id="org9dc929f"><span class="section-number-3">1.1.</span> 在<a href="http://www.github.com">http://www.github.com</a> 上注册帐号，建立博客。</h3>
</div>
<div id="outline-container-org2e05a5c" class="outline-3">
<h3 id="org2e05a5c"><span class="section-number-3">1.2.</span> 生成ssh密钥，以备上传下载、文章发布。</h3>
<div class="outline-text-3" id="text-1-2">
<p>
网上相关教程繁多，搜索阅读即可完成此步。
</p>
</div>
</div>
</div>
<div id="outline-container-orgef6c007" class="outline-2">
<h2 id="orgef6c007"><span class="section-number-2">2.</span> 选择主题</h2>
<div class="outline-text-2" id="text-2">
<p>
官方主题在<a href="http://jekyllthemes.org/">http://jekyllthemes.org/</a>， 选择你喜欢的一款使用。我选用的是<a href="http://sparanoid.com/lab/amsf/getting-started.html%20">Almace Scaffolding</a>，优点是简洁舒适，极具时尚感，并且特别适合手机浏览。
</p>
<div class="HTML" id="orgc86c6c4">
<p>
&lt;img src="/assets/img/img_2016_05_02__13_27_36.png" alt="img_2016_05_02__13_27_36.png"&gt;&lt;br &gt;
</p>

</div>
<p>
本主题要求用bundle和npm安装部分gem packages，因此有一点环境搭建的需求。
</p>
</div>
<div id="outline-container-org72fec9e" class="outline-3">
<h3 id="org72fec9e"><span class="section-number-3">2.1.</span> 安装node.js</h3>
<div class="outline-text-3" id="text-2-1">
<pre class="code"><code>wget -N http://nodejs.org/dist/node-latest.tar.gz
tar xzvf node-latest.tar.gz <span style="color: #81A1C1;">&amp;&amp;</span> cd node-v*
./configure
make
sudo make install
</code></pre>
</div>
</div>
<div id="outline-container-orga3b975d" class="outline-3">
<h3 id="orga3b975d"><span class="section-number-3">2.2.</span> 安装ruby。不建议使用vpm进行包安装。安装后自带gem</h3>
<div class="outline-text-3" id="text-2-2">
<pre class="code"><code>wget https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.0.tar.gz
tar xzvf ruby-2.3.0.tar.gz
./configure
make
sudo make install
</code></pre>
</div>
</div>
<div id="outline-container-orged14cb5" class="outline-3">
<h3 id="orged14cb5"><span class="section-number-3">2.3.</span> 安装bundler</h3>
<div class="outline-text-3" id="text-2-3">
<p>
<code>gem install bundler</code> ,  <code>emacs Gemfile</code> ,
</p>
<pre class="code"><code>group <span style="color: #81A1C1;">:jekyll_plugins</span> do
  gem 'jekyll', '3.1.2'
  gem 'jekyll-last-modified-at'
  gem 'nokogiri'
  gem 'therubyracer'
  gem 'stringex'
</code></pre>
<p>
<code>bundle install</code>
</p>
</div>
</div>
<div id="outline-container-org4c62850" class="outline-3">
<h3 id="org4c62850"><span class="section-number-3">2.4.</span> 安装npm</h3>
<div class="outline-text-3" id="text-2-4">
<pre class="code"><code>npm install -g grunt-cli
npm install grunt --save-dev
npm install grunt
npm install
</code></pre>
<p>
注意此处安装的顺序应该是，先npm install -g grunt-cli，再sudo npm install grunt
如果使用gem安装grunt，目前会造成grunt版本过低，是0.0.3版，实际应该是0.4.5版以上。
或者选择安装的版本号 <code>sudo npm install grunt@v0.4.5 --save-dev</code>
</p>
</div>
</div>
<div id="outline-container-orgde62837" class="outline-3">
<h3 id="orgde62837"><span class="section-number-3">2.5.</span> 安装诸多packages的时候，由于中国政府GFW的封杀，需要翻墙</h3>
<div class="outline-text-3" id="text-2-5">
</div>
<ol class="org-ol">
<li><a id="org96d6630"></a>编辑 Gemfile，添加 <a href="https://ruby.taobao.org/">https://ruby.taobao.org/</a> 源的方法<br>
<div class="outline-text-4" id="text-2-5-1">
<pre class="code"><code>$ gem sources --add https://ruby.taobao.org/ --remove https://rubygems.org/
$ gem sources -l
</code></pre>
<p>
<b>请确保只有 ruby.taobao.org</b> 
如果你使用 Gemfile 和 Bundle (例如：Rails 项目)
你可以用 Bundler 的 Gem 源代码镜像命令。
</p>
<pre class="code"><code>$ bundle config mirror.https://rubygems.org https://ruby.taobao.org
</code></pre>
<p>
   这样你不用改你的 Gemfile 的 source。
<code>source 'https://rubygems.org/'</code> 
</p>
</div>
</li>
<li><a id="org38a842c"></a>使用term代理的方法<br>
<div class="outline-text-4" id="text-2-5-2">
<p>
如果不添加taobao源，也可以使用proxychains4在terminal中使用代理。
参见<a href="http://yefeiyu.github.io/soft/2016/04/11/terminal%E4%BD%BF%E7%94%A8proxychains%E4%BB%A3%E7%90%86.html">Terminal无法代理的解决</a>
</p>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orge1b5315" class="outline-2">
<h2 id="orge1b5315"><span class="section-number-2">3.</span> 理清博客结构</h2>
<div class="outline-text-2" id="text-3">
<p>
在各教程中都有github博客结构的详细介绍。Alm Sco主题结构稍有不同，分为根目录和_app子目录两个嵌套结构。
</p>
</div>
<div id="outline-container-orgbfd79a3" class="outline-3">
<h3 id="orgbfd79a3"><span class="section-number-3">3.1.</span> 根目录</h3>
<div class="outline-text-3" id="text-3-1">
<pre class="example" id="orgbe8a63f">
.
├── _amsf
│   └── _config.yml
├── _app
│   └── ......
├── ATTRIBUTION.md
├── CHANGELOG.md
├── _config.dev.yml
├── _config.init.yml
├── _config.yml
├── CONTRIBUTING.md
├── CONVENTIONS.md
├── _deploy.yml
├── Gemfile
├── Gemfile.lock
├── Gruntfile.coffee
├── LICENSE
├── package.json
├── README.md
└── TODOS.md
</pre>
<p>
其中_config.yml就是博客的配置文件，在该文件中，Almace Scaffolding主题将源文件放到专门的_app文件夹中， <code>source:         _app</code> ，另一个_amsf文件夹负责本主题的升级。
其他_lanyouts, _includes, _posts, _drafts等在其他主题中放置配置和草稿、文章的文件夹挪至_app中，本文后面提到的标签云、搜索、评论等功能在这些文件中配置。
</p>
</div>
</div>
<div id="outline-container-org89475d0" class="outline-3">
<h3 id="org89475d0"><span class="section-number-3">3.2.</span> _app文件夹内容</h3>
<div class="outline-text-3" id="text-3-2">
<pre class="example" id="org11a00cf">
├── assets
│   ├── fonts
│   ├── img
│   │   ├── img_2016_05_02__13_27_36.png
│   │   └── ......
│   ├── _less
│   │   └── user.less
│   ├── svg
│   │   └── kai.svg
│   └── themes
│       └── curtana
│           ├── css
│           │   └── app.css
│           ├── _js
│           │   ├── app.js
│           │   └── lightense.js
│           └── _less
│               ├── app.less
│               ├── colors.less
│               ├── common.less
│               ├── components
│               │   └── randomized.less
│               ├── mixins.less
│               ├── plugins.less
│               ├── print.less
│               ├── reset.less
│               └── variables.less
├── _data
│   ├── authors.yml
│   ├── curtana.yml
│   └── nav.yml
├── _drafts
├── favicon.ico
├── favicon.svg
├── feed-atom.xml
├── feed-json.json
├── _includes
│   ├── _amsf.html
│   └── themes
│       └── curtana
│           ├── includes
│           │   ├── archive_list
│           │   ├── back_top_button
│           │   ├── categories_list
│           │   ├── contacts_list
│           │   ├── content.html
│           │   ├── css-variables.html
│           │   ├── fixed_container
│           │   ├── footer.html
│           │   ├── header.html
│           │   ├── links_list
│           │   ├── open-graph.html
│           │   ├── page-item.html
│           │   ├── post-search.html
│           │   ├── post-tags.html
│           │   ├── recent_posts_list
│           │   ├── repos_list
│           │   ├── search_box
│           │   ├── tag_cloud
│           │   └── top.html
│           └── layouts
│               ├── default.html
│               ├── page.html
│               └── post.html
├── js
│   ├── date.format.js
│   ├── jquery.js
│   ├── jquery.lunr.search.js
│   ├── lunr.js
│   ├── lunr.min.js
│   ├── mustache.js
│   ├── search.js
│   ├── search.min.js
│   ├── URI.js
│   └── URI.min.js
├── _layouts
│   ├── default.html
│   ├── page.html
│   └── post.html
├── _org
│   ├── 2014-04-01-custom-css.md.bak
│   └── ......
├── _pages
│   ├── about.md
│   ├── archives.html
│   ├── art.html
│   ├── ......
│   ├── email-signup.md
│   ├── email-subscribed.md
│   ├── email-unsubscribed.md
│   ├── email-verify.md
│   ├── error.md
│   ├── index.html
│   ├── search.md
│   └── tags.html
├── _plugins
│   ├── debug.rb
│   └── jekyll_lunr_js_search.rb
├── _posts
│   ├── attitude
│   │   └── 2015-07-27-848.md
│   ├── fiction
│   ├── .......
├── robots.txt
└── sitemap.xml
</pre>
<p>
对于一般github博客来说，
<b>使用一个复杂功能的主题，可能需要的东西比较多，因此可以从选用其他简洁主题开始。
如果使用官方原主题，会在方便使用的基础上更具有网页发布的功能</b>
</p>
</div>
</div>
</div>
<div id="outline-container-org2554b9d" class="outline-2">
<h2 id="org2554b9d"><span class="section-number-2">4.</span> 增加邮箱定阅</h2>
<div class="outline-text-2" id="text-4">
<p>
具体配置参见_pages中以email开关的文件
</p>
</div>
</div>
<div id="outline-container-org3d31076" class="outline-2">
<h2 id="org3d31076"><span class="section-number-2">5.</span> 增加rss定阅</h2>
<div class="outline-text-2" id="text-5">
<p>
在_data文件夹中打开curtana文件，将subscription:   false改为true
</p>
</div>
</div>
<div id="outline-container-orgdadab4d" class="outline-2">
<h2 id="orgdadab4d"><span class="section-number-2">6.</span> 增加评论</h2>
<div class="outline-text-2" id="text-6">
<p>
采用disqus评论，功能齐全、使用广泛，注册后在各个采用disqus的地方的评论都可以统一管理、查看。此外还可以在色调等上面达到较好统一。
在disqus注册后将网站生成的代码放置于 <code>/_includes/themes/curtana/layouts/post.html</code> 中。
</p>
<pre class="code"><code>&lt;font size= 1&gt;[&#24314;&#35758;&#27880;&#20876;disqus&#20197;&#20445;&#23384;&#20840;&#32593;&#35780;&#35770;&#21382;&#21490;]&lt;/font&gt;
&lt;div id=<span style="color: #D08770;">"disqus_thread"</span>&gt;&lt;/div&gt;
&lt;script type=<span style="color: #D08770;">"text/javascript"</span>&gt;
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script')<span style="color: #677691;">; dsq.type = 'text/javascript'; dsq.async = true;</span>
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'<span style="color: #677691;">;</span>
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)<span style="color: #677691;">;</span>
    })<span style="color: #D08770;">()</span><span style="color: #D08770;">;</span>
&lt;/article&gt;
</code></pre>
</div>
</div>
<div id="outline-container-orgf715a3f" class="outline-2">
<h2 id="orgf715a3f"><span class="section-number-2">7.</span> 增加标签云</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org596398a" class="outline-3">
<h3 id="org596398a"><span class="section-number-3">7.1.</span> 在includes中建立tags_cloud文件</h3>
<div class="outline-text-3" id="text-7-1">
<p>
具体位置是/_includes/themes/curtana/includes
</p>
<pre class="example" id="org1c1a54e">
&lt;a href="{{ site.JB.tags_path }}" title="查看所有标签"&gt;&lt;i class="icon-fixed-width icon-tags"&gt;&lt;/i&gt; 标签云&lt;/a&gt;
&lt;span title="标签总数"&gt;{{ site.tags | size }}&lt;/span&gt;
&lt;div id="tag-cloud"&gt;
{\% assign first = site.tags.first \%}
{\% assign max = first[1].size \%}
{\% assign min = max \%}
{\% for tag in site.tags offset:1 \%}
  {\% if tag[1].size &gt; max \%}
    {\% assign max = tag[1].size \%}
  {\% elsif tag[1].size &lt; min \%}
    {\% assign min = tag[1].size \%}
  {\% endif \%}
{\% endfor \%}
{\% assign diff = max | minus: min \%}
{\% if diff != 0 \%}
  {\% for tag in site.tags \%}
    {\% assign temp = tag[1].size | minus: min | times: 36 | divided_by: diff \%}
    {\% assign base = temp | divided_by: 4 \%}
    {\% assign remain = temp | modulo: 4 \%}
    {\% if remain == 0 \%}
      {\% assign size = base | plus: 9 \%}
    {\% elsif remain == 1 or remain == 2 \%}
      {\% assign size = base | plus: 9 | append: '.5' \%}
    {\% else \%}
      {\% assign size = base | plus: 10 \%}
    {\% endif \%}
    {\% if remain == 0 or remain == 1 \%}
      {\% assign color = 9 | minus: base \%}
    {\% else \%}
      {\% assign color = 8 | minus: base \%}
    {\% endif \%}
    &lt;a href="{{ site.JB.tags_path }}#{{ tag[0] }}-ref" style="font-size: {{ size }}pt; color: #{{ color }}{{ color }}{{ color }};"&gt;{{ tag[0] }}&lt;/a&gt;
  {\% endfor \%}
{\% endif \%}
&lt;/div&gt;
</pre>
</div>
</div>

<div id="outline-container-orgb6d53ea" class="outline-3">
<h3 id="orgb6d53ea"><span class="section-number-3">7.2.</span> 在_pages中建立tags.html文件<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/><span class="sidenote">
本部分和后面凡带有 <code>\%</code> 注释的，在实际使用时都需去掉 <code>\</code> 
</span></h3>
<div class="outline-text-3" id="text-7-2">
<pre class="code"><code>---
layout: default
title: Tags Cloud
permalink: /tags/
desc: &#27161;&#31614;&#38642;&#12539; &#12527;&#12540;&#12463;&#12473;&#12539;TBC
---
&lt;div id=<span style="color: #D08770;">"search"</span>&gt;
  &lt;form action=<span style="color: #D08770;">"/search"</span> method=<span style="color: #D08770;">"get"</span>&gt;
    &lt;input type=<span style="color: #D08770;">"text"</span> id=<span style="color: #D08770;">"search-query"</span> name=<span style="color: #D08770;">"q"</span> placeholder=<span style="color: #D08770;">"Search"</span> autocomplete=<span style="color: #D08770;">"off"</span>&gt;
  &lt;/form&gt;
&lt;/div&gt;

&lt;div class=<span style="color: #D08770;">"span4"</span> style=<span style="color: #D08770;">"text-align: center;"</span>&gt;
  &lt;div class=<span style="color: #D08770;">"row-fluid"</span>&gt;
    &lt;div class=<span style="color: #D08770;">"span12 padded"</span>&gt;
      &lt;h3 style=<span style="color: #D08770;">"color:#333333"</span>&gt;Tags Cloud&lt;/h3&gt;
&lt;/dev&gt;
&lt;/dev&gt;
&lt;/dev&gt;
&lt;ul class=<span style="color: #D08770;">"tag-cloud"</span>&gt;
  {\% for tag in site.tags \%}
&lt;a style=<span style="color: #D08770;">"font-size: {{ tag | last | size | times: 1000 | divided_by: site.tags.size | plus:70 }}%"</span>  href=<span style="color: #D08770;">"#{{ tag | first | slugize }}"</span>&gt;
  <span style="color: #81A1C1;">&amp;nbsp</span>  {{ tag | first | tags }}  <span style="color: #81A1C1;">&amp;nbsp</span>
&lt;/a&gt;
{\% endfor \%}
&lt;/ul&gt;

&lt;div class=<span style="color: #D08770;">"span4"</span> style=<span style="color: #D08770;">"text-align: left;"</span>&gt;
 &lt;h2&gt;&#21015;&#34920;&lt;/h2&gt;
  
&lt;div id=<span style="color: #D08770;">"archives"</span>&gt;
{\% for tag in site.tags \%}
  &lt;div class=<span style="color: #D08770;">"archive-group"</span>&gt;
    {\% capture tag_name \%}{{ tag | first }}{\% endcapture \%}
    &lt;li style="color:#ff00b4"
        id="#{{ tag_name | slugize }}<span style="color: #D08770;">"&gt;{{ tag_name }}&lt;/li&gt;</span>
<span style="color: #D08770;">    &lt;a name="</span>{{ tag_name | slugize }}"&gt;&lt;/a&gt;
    {\% for post in site.tags[tag_name] \%}
    &lt;article class="archive-item"&gt;
      &lt;div&gt;&lt;a href="{{ root_url }}{{ post.url }}"&gt;{{post.title}}&lt;/a&gt;&lt;/div&gt;
    &lt;/article&gt;
    {\% endfor \%}
  &lt;/div&gt;
{\% endfor \%}
&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>
其中 <code>&lt;a style="font-size: {{ tag | last | size | times: 1000 | divided_by: site.tags.size | plus:70 }}%"  href="#{{ tag | first | slugize }}"&gt;</code> 中的 <code>times</code> 控制标签云中字体大小比例变化，如果标签较小的话把数值设小点。
markdown的文件头（&#x2014;三个中横线中的内容）用来生成 单独页面。
</p>
</div>
</div>
<div id="outline-container-org1e520f6" class="outline-3">
<h3 id="org1e520f6"><span class="section-number-3">7.3.</span> 在/_includes/themes/curtana/includes中的css-variables.html中添加css的格式设置</h3>
<div class="outline-text-3" id="text-7-3">
<pre class="code"><code>&lt;style&gt;
{\% for tag in site.tags \%}
.tag-cloud {
list-style: none<span style="color: #677691;">;</span>
word-break:keep-all<span style="color: #677691;">;</span>
padding: 0<span style="color: #677691;">;</span>
padding-right: 6%<span style="color: #677691;">;</span>
text-align: justify<span style="color: #677691;">; </span>
font-size: 16px<span style="color: #677691;">;</span>
a{
display: inline-block<span style="color: #677691;">;</span>
margin: 0 12px 12px 0<span style="color: #677691;">; </span>
}}
# archives {
  padding: 5px<span style="color: #677691;">;</span>
}
.archive-group {
margin: 15px<span style="color: #677691;">;</span>
border-top: 1px solid #ddd<span style="color: #677691;">;</span>
}
.archive-item {
margin-left: 12px<span style="color: #677691;">;</span>
}
.post-tags {
  text-align: left<span style="color: #677691;">;</span>
}
{\% endfor \%}
&lt;/style&gt;
</code></pre>
<p>
其中 <code>word-break:keep-all;</code> 和 <code>display: inline-block;</code> 用来控制标签云中的关键词不断行（在iphone 5s的浏览器上仍然无效）， <code>padding-right: 6%;</code> 用来控制右侧的空白距离，  <code>.post-tags { text-align: left;</code> 用来控制标签在文章的左侧还是右侧。
</p>
</div>
</div>
<div id="outline-container-org58c898e" class="outline-3">
<h3 id="org58c898e"><span class="section-number-3">7.4.</span> 在_includes/themes/curtana/layouts的post.html中为每篇文章添加引用tag的模板</h3>
<div class="outline-text-3" id="text-7-4">
<pre class="code"><code>{\% include {{ amsf_theme_base }}/includes/post-tags.html \%}
</code></pre>
<p>
上面路径要修改正确。
</p>
</div>
</div>
</div>
<div id="outline-container-org30fc46b" class="outline-2">
<h2 id="org30fc46b"><span class="section-number-2">8.</span> 添加中文搜索</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org7e4e830" class="outline-3">
<h3 id="org7e4e830"><span class="section-number-3">8.1.</span> 使用jekyll-lunr-js-search</h3>
<div class="outline-text-3" id="text-8-1">
<p>
项目地址是<a href="https://github.com/slashdotdash/jekyll-lunr-js-search">slashdotdash/jekyll-lunr-js-search</a>
</p>
</div>
<ol class="org-ol">
<li><a id="orge5ea429"></a>安装方法<br>
<ol class="org-ol">
<li><a id="org63c29f5"></a>直接在Gemfile中添加jekyll-lunr-js-search，然后bundle install<br></li>
<li><a id="org8ad6889"></a>通过git clone项目地址<br>
<div class="outline-text-5" id="text-8-1-1-2">
<pre class="code"><code>git clone git@github.com:slashdotdash/jekyll-lunr-js-search.git
</code></pre>
<p>
然后下载相关依赖。
    jQuery
    lunr.js
    Mustache.js
    date.format.js
    URI.js
将相关依赖放置于js文件夹。
</p>
</div>
</li>
<li><a id="orge919abe"></a>通过rake build<br>
<div class="outline-text-5" id="text-8-1-1-3">
<p>
git clone后，在文件夹根目录中有bower.json文件，这是可以由bower通过rake build安装的配置文件。
安装bower的方法是npm install -g bower
bower.json文件中，把依赖的版本改到最新：
</p>
<pre class="code"><code>  <span style="color: #D08770;">"dependencies"</span>: {
    <span style="color: #D08770;">"date.format"</span>: <span style="color: #D08770;">"~1.2.3"</span>,
    <span style="color: #D08770;">"jquery"</span>: <span style="color: #D08770;">"~2.2.3"</span>,
    <span style="color: #D08770;">"lunr.js"</span>: <span style="color: #D08770;">"~0.7.0"</span>,
    <span style="color: #D08770;">"mustache"</span>: <span style="color: #D08770;">"~2.2.1"</span>,
    <span style="color: #D08770;">"uri.js"</span>: <span style="color: #D08770;">"~1.18.0"</span>
}
</code></pre>
<p>
通过 rake build命令后，生成 build文件夹，其中生成四个js文件，copy至博客 的js文件夹，rb文件，copy至博客的_plugins文件夹。
</p>
</div>
</li>
<li><a id="orgf7bbed0"></a>调换中文搜索功能<br>
<div class="outline-text-5" id="text-8-1-1-4">
<p>
由于 jekyll-lunr-js-search靠的是lunr.js， olivernn提供的。lunr.js并不支持中文，因此需要另想方法。
感谢codepiano，<a href="https://github.com/codepiano/lunr.js">codepiano/lunr.js</a>
git 后将lunr.js 和lunr.min.js替换，可以实现中文搜索。
在使用的时候，需要将_plugins/jekyll_lunr_js_search.rb文件中两处length&gt;3改成1,适配中文单字。
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org715ba24" class="outline-3">
<h3 id="org715ba24"><span class="section-number-3">8.2.</span> 其他</h3>
<div class="outline-text-3" id="text-8-2">
</div>
<ol class="org-ol">
<li><a id="org7335330"></a>使用lunr.js配合lunr-languages<br>
<div class="outline-text-4" id="text-8-2-1">
<p>
lunr-languages， lunr.js的多国语言项目。<a href="https://github.com/MihaiValentin/lunr-languages">MihaiValentin/lunr-languages</a>
其中有lunr.jp.js， 日本的编码。由于汉字和日本假名都是UTF-8编码，应该可以借用。不过我没有成功。
</p>
<div class="HTML" id="org782ad17">
<p>
&lt;font color="#ff00ff"&gt;请配置成功的兄弟告知&lt;/font&gt;
</p>

</div>
</div>
</li>
<li><a id="org9a5257c"></a>i18n<br>
<div class="outline-text-4" id="text-8-2-2">
<p>
olivernn在<a href="https://github.com/olivernn/lunr.js/tree/i18n">i18n</a> 中。
</p>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orga1be584" class="outline-2">
<h2 id="orga1be584"><span class="section-number-2">9.</span> 使用org-mode撰写和发布</h2>
<div class="outline-text-2" id="text-9">
<p>
<b>世界上有两种人，一种是平常人，一种是深井冰。</b>
<b>深井冰里有两种人，一种是用vi的，一种是用emacs的。</b>
<b>一说vi是编辑器之神，一说emacs是神之编辑器。</b>
<b>vi毕生追求只做一件事，emacs追求做一切事。</b>
<b>这当然要包括用来撰写和发布博客。</b>
<b>做任何一件事，都像emacs对待按键组合一样，繁复到变态。</b>
<b>org-mode亦如是。</b>
<b>如果是深井冰而不是平常人，是写博客而不是写微博发圈的人，是用emacs而不是vi的人，那必是用org-mode来完成这件事的人。</b> 
</p>
</div>
<div id="outline-container-org485aa6d" class="outline-3">
<h3 id="org485aa6d"><span class="section-number-3">9.1.</span> 博客直接使用.org文件</h3>
<div class="outline-text-3" id="text-9-1">
<p>
安装插件后可以实现，搜索网上有教程。
</p>
</div>
</div>
<div id="outline-container-org792adcb" class="outline-3">
<h3 id="org792adcb"><span class="section-number-3">9.2.</span> 自带.org文件转.html或.md文件</h3>
<div class="outline-text-3" id="text-9-2">
<p>
C-c，C-e，h或m
原生功能，对于单个文件没有问题，但是对于网站特别是jekyll静态网站，因为涉及文件头和网站结构，因此更适合下面方式。
</p>
</div>
</div>
<div id="outline-container-org246a129" class="outline-3">
<h3 id="org246a129"><span class="section-number-3">9.3.</span> 使用org2jekyll</h3>
<div class="outline-text-3" id="text-9-3">
</div>
<ol class="org-ol">
<li><a id="orgc772e0d"></a>优点<br>
<div class="outline-text-4" id="text-9-3-1">
<p>
配合预设定的配置，完美沟通org-mode， html， jekyll和github。
新建文章时只需要在buffer栏根据引导步骤填写好desesion,tags,categories和其他YAML Headers即可自动生成markdown格式文件头。
组合键直接转换带日期、支持中文名字的html文件。
</p>
</div>
</li>
<li><a id="org8c74067"></a>基本使用<br>
<ol class="org-ol">
<li><a id="orgb2d1edc"></a>使用package-install安装<br></li>
<li><a id="org704ae48"></a>在init.d文件夹中保存配置文件blog-pack.el<br>
<div class="outline-text-5" id="text-9-3-2-2">
<pre class="code"><code><span style="color: #677691;">;;</span><span style="color: #677691;">(use-package org2jekyll</span>
<span style="color: #677691;">;;  </span><span style="color: #677691;">:defer 3</span>
<span style="color: #677691;">;;  </span><span style="color: #677691;">:config</span>
(<span style="color: #81A1C1;">require</span> '<span style="color: #81A1C1;">org</span>)
(<span style="color: #81A1C1;">require</span> '<span style="color: #81A1C1;">org2jekyll</span>)

(custom-set-variables
 '(org2jekyll-blog-author       <span style="color: #D08770;">"yefeiyu"</span>)
 '(org2jekyll-source-directory  (expand-file-name <span style="color: #D08770;">"~/gh/yefeiyu.github.io/_app/"</span>))
 '(org2jekyll-jekyll-directory  (expand-file-name <span style="color: #D08770;">"~/gh/yefeiyu.github.io/_app/"</span>))
 '(org2jekyll-jekyll-drafts-dir <span style="color: #D08770;">"_org/"</span>)
 '(org2jekyll-jekyll-posts-dir  <span style="color: #D08770;">"_drafts/"</span>)
 '(org-publish-project-alist
   `((<span style="color: #D08770;">"default"</span>
      <span style="color: #81A1C1;">:base-directory</span> ,(org2jekyll-input-directory)
      <span style="color: #81A1C1;">:base-extension</span> <span style="color: #D08770;">"org"</span>
      <span style="color: #677691;">;; </span><span style="color: #677691;">:publishing-directory "/ssh:user@host:~/html/notebook/"</span>
      <span style="color: #81A1C1;">:publishing-directory</span> ,(org2jekyll-output-directory)
      <span style="color: #81A1C1;">:publishing-function</span> org-html-publish-to-html
      <span style="color: #81A1C1;">:headline-levels</span> 6
      <span style="color: #81A1C1;">:section-numbers</span> nil
      <span style="color: #81A1C1;">:with-toc</span> nil
      <span style="color: #81A1C1;">:html_head</span> <span style="color: #D08770;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"~/gh/yefeiyu.github.io/assets/themes/curtana/css/app.css\" /&gt;"</span>
      <span style="color: #81A1C1;">:html-preamble</span> t
      <span style="color: #81A1C1;">:recursive</span> t
      <span style="color: #81A1C1;">:make-index</span> t
      <span style="color: #81A1C1;">:html-extension</span> <span style="color: #D08770;">"html"</span>
      <span style="color: #81A1C1;">:body-only</span> t)

     (<span style="color: #D08770;">"post"</span>
      <span style="color: #81A1C1;">:base-directory</span> ,(org2jekyll-input-directory)
      <span style="color: #81A1C1;">:base-extension</span> <span style="color: #D08770;">"org"</span>
      <span style="color: #81A1C1;">:publishing-directory</span> ,(org2jekyll-output-directory org2jekyll-jekyll-posts-dir)
      <span style="color: #81A1C1;">:publishing-function</span> org-html-publish-to-html
      <span style="color: #81A1C1;">:headline-levels</span> 6
      <span style="color: #81A1C1;">:section-numbers</span> nil
      <span style="color: #81A1C1;">:with-toc</span> nil
      <span style="color: #81A1C1;">:html_head</span> <span style="color: #D08770;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"~/gh/yefeiyu.github.io/assets/themes/curtana/css/app.css\" /&gt;"</span>
      <span style="color: #81A1C1;">:html-preamble</span> t
      <span style="color: #81A1C1;">:recursive</span> t
      <span style="color: #81A1C1;">:make-index</span> t
      <span style="color: #81A1C1;">:html-extension</span> <span style="color: #D08770;">"html"</span>
      <span style="color: #81A1C1;">:body-only</span> t)

     (<span style="color: #D08770;">"images"</span>
      <span style="color: #81A1C1;">:base-directory</span> ,(org2jekyll-input-directory <span style="color: #D08770;">"assets/img"</span>)
      <span style="color: #81A1C1;">:base-extension</span> <span style="color: #D08770;">"jpg\\|gif\\|png"</span>
      <span style="color: #81A1C1;">:publishing-directory</span> ,(org2jekyll-output-directory <span style="color: #D08770;">"assets/img"</span>)
      <span style="color: #81A1C1;">:publishing-function</span> org-publish-attachment
      <span style="color: #81A1C1;">:recursive</span> t)

     (<span style="color: #D08770;">"js"</span>
      <span style="color: #81A1C1;">:base-directory</span> ,(org2jekyll-input-directory <span style="color: #D08770;">"assets/js"</span>)
      <span style="color: #81A1C1;">:base-extension</span> <span style="color: #D08770;">"js"</span>
      <span style="color: #81A1C1;">:publishing-directory</span> ,(org2jekyll-output-directory <span style="color: #D08770;">"assets/js"</span>)
      <span style="color: #81A1C1;">:publishing-function</span> org-publish-attachment
      <span style="color: #81A1C1;">:recursive</span> t)

     (<span style="color: #D08770;">"css"</span>
      <span style="color: #81A1C1;">:base-directory</span> ,(org2jekyll-input-directory <span style="color: #D08770;">"assets/themes/curtana/css"</span>)
      <span style="color: #81A1C1;">:base-extension</span> <span style="color: #D08770;">"css\\|el"</span>
      <span style="color: #81A1C1;">:publishing-directory</span> ,(org2jekyll-output-directory <span style="color: #D08770;">"assets/themes/curtana/css"</span>)
      <span style="color: #81A1C1;">:publishing-function</span> org-publish-attachment
      <span style="color: #81A1C1;">:recursive</span> t)

     (<span style="color: #D08770;">"web"</span> <span style="color: #81A1C1;">:components</span> (<span style="color: #D08770;">"images"</span> <span style="color: #D08770;">"js"</span> <span style="color: #D08770;">"css"</span>)))))
</code></pre>
</div>
</li>
<li><a id="org64813c4"></a>在.emacs中写入 <code>(require 'blog-pack)</code><br></li>
</ol>
</li>
<li><a id="orge0fad53"></a>自定义markdown头文件。<br>
<div class="outline-text-4" id="text-9-3-3">
<p>
根据下面的例子，可以自定义多种属于自己的md head。下例中scheme就是定义文章的字体、链接及背景等颜色的。调用颜色可以直接使用自定义的组合键C-x j l 或者M-x list-colors-display
</p>
<div class="HTML" id="org8aec5b1">
<p>
&lt;img src="/assets/img/img_2016_05_03__19_36_18.png" alt="img_2016_05_03__19_36_18.png"&gt;&lt;br &gt;
</p>

</div>
<pre class="code"><code>(<span style="color: #81A1C1;">defun</span> <span style="font-weight: bold;">yefeiyu-read-extra-yaml-headers</span> ()
  <span style="color: #677691;">"Read some pre-formatted extra yaml headers from user.</span>
<span style="color: #677691;">Write the extra-headers at point."</span>
  (interactive)
  (<span style="color: #81A1C1;">let</span> ((theme (read-input <span style="color: #D08770;">"theme: "</span>))
        (plugin (read-input <span style="color: #D08770;">"plugin: "</span>))
        (scheme-text (read-input <span style="color: #D08770;">"scheme-text: "</span>))
        (scheme-link (read-input <span style="color: #D08770;">"scheme-link: "</span>))
        (scheme-hover (read-input <span style="color: #D08770;">"scheme-hover: "</span>))
        (scheme-code (read-input <span style="color: #D08770;">"scheme-code: "</span>))
        (scheme-bg (read-input <span style="color: #D08770;">"scheme-bg: "</span>))
        (scheme-hero-text (read-input <span style="color: #D08770;">"scheme-hero-text: "</span>))
        (scheme-hero-link (read-input <span style="color: #D08770;">"scheme-hero-link: "</span>))
        (scheme-hero-bg (read-input <span style="color: #D08770;">"scheme-hero-bg: "</span>)))
    (insert (format <span style="color: #D08770;">"#+EXTRA-YAML-HEADERS: theme: %s\\nplugin: %s\\nscheme-text: \"#%s\"\\nscheme-link: \"#%s\"\\nscheme-hover: \"#%s\"\\nscheme-code: \"#%s\"\\nscheme-bg: \"#%s\"\\nscheme-hero-text: \"#%s\"\\nscheme-hero-link: \"#%s\"\\nscheme-hero-bg: \"#%s\"\\nscheme-bg-light: true\\n"</span>
                    theme plugin scheme-text scheme-link scheme-hover scheme-code scheme-bg scheme-hero-text scheme-hero-link scheme-hero-bg))))
</code></pre>
<p>
按M-x yef TAB调用。
</p>
</div>
</li>
<li><a id="org17ab22d"></a>修改默认生成html文件为md文件<br>
<ol class="org-ol">
<li><a id="org5408336"></a>在配置文件中添加以下代码：<br>
<div class="outline-text-5" id="text-9-3-4-1">
<pre class="code"><code>(<span style="color: #81A1C1;">defun</span> <span style="font-weight: bold;">org-md-publish-to-md</span> (plist filename pub-dir)
  <span style="color: #677691;">"Publish an org file to Markdown.</span>
<span style="color: #677691;">FILENAME is the filename of the Org file to be published.  PLIST</span>
<span style="color: #677691;">is the property list for the given project.  PUB-DIR is the</span>
<span style="color: #677691;">publishing directory.</span>
<span style="color: #677691;">Return output file name."</span>
  (org-publish-org-to 'md filename <span style="color: #D08770;">".md"</span> plist pub-dir))
</code></pre>
</div>
</li>
<li><a id="orgfcba7db"></a>将blog-pack.el文件中所有的html改成md。<br></li>
</ol>
</li>
<li><a id="orga8eda08"></a>修改快捷键<br>
<div class="outline-text-4" id="text-9-3-5">
<p>
原快捷键绑定在C-c . 上，在org中这样会调出日期插入页面。我改成了C-x j。
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-org8df41db" class="outline-3">
<h3 id="org8df41db"><span class="section-number-3">9.4.</span> 使用一键截图</h3>
<div class="outline-text-3" id="text-9-4">
<p>
通过配置.emacs快速截图，预定义保存位置，自动生成带时间戳的图片并自动插入文中。
</p>
<pre class="code"><code>(<span style="color: #81A1C1;">defun</span> <span style="font-weight: bold;">my/img-maker</span> ()
  <span style="color: #677691;">"Make folder if not exist, define image name based on time/date"</span>
  (setq myvar/img-folder-path (concat default-directory <span style="color: #D08770;">"../assets/img/"</span>))

                                        <span style="color: #677691;">; Make img folder if it doesn't exist.</span>
  (<span style="color: #81A1C1;">if</span> (not (file-exists-p myvar/img-folder-path)) <span style="color: #677691;">;[ ] refactor thir and screenshot code.</span>
      (mkdir myvar/img-folder-path))

  (setq myvar/img-name (concat <span style="color: #D08770;">"img_"</span> (format-time-string <span style="color: #D08770;">"%Y_%m_%d__%H_%M_%S"</span>) <span style="color: #D08770;">".png"</span>))
  (setq myvar/img-Abs-Path (concat myvar/img-folder-path myvar/img-name)) <span style="color: #677691;">;Relative to workspace.</span>

  (setq myvar/relative-filename (concat <span style="color: #D08770;">"./assets/img/"</span> myvar/img-name))
  (insert <span style="color: #D08770;">"[["</span> myvar/relative-filename <span style="color: #D08770;">"]]"</span> <span style="color: #D08770;">"\n"</span>)
  )

(<span style="color: #81A1C1;">defun</span> <span style="font-weight: bold;">my/org-screenshot</span> ()
  <span style="color: #677691;">"Take a screenshot into a time stamped unique-named file in the</span>
<span style="color: #677691;"> sub-directory (%filenameIMG) as the org-buffer and insert a link to this file."</span>
  (interactive)
  (my/img-maker)
                                        <span style="color: #677691;">;(make-frame-invisible)</span>
  (lower-frame)
  (call-process <span style="color: #D08770;">"import"</span> nil nil nil myvar/img-Abs-Path)

  (raise-frame)
                                        <span style="color: #677691;">;(make-frame-visible)</span>
  (org-display-inline-images)
  )
</code></pre>
<p>
目前配置的目录"./assets/img/"在生成的html文件中，会多出一个“. 目录”，但如果没有这个点,生成的格式为img src=file: ///又会多出file：//导致无法识别根目录。
目前我解决办法是修改自动生成的 <code>[[]]</code> 链接为img src=/assets/img。
</p>
<div class="HTML" id="orgb8f67c7">
<p>
&lt;font color="#ff00ff"&gt;不知是否有解决办法&lt;/font&gt;
</p>

</div>
</div>
</div>
</div>

<div id="outline-container-org1565a40" class="outline-2">
<h2 id="org1565a40"><span class="section-number-2">10.</span> 简化发布流程</h2>
<div class="outline-text-2" id="text-10">
<p>
主要借助于alias,配置~目录下.bash_aliases文件
</p>
<pre class="example" id="orgb03ccec">
alias gt='git status '
alias ga='git add '
alias gb='git branch '
alias gc='git commit'
alias gd='git diff'
alias go='git checkout '
alias gk='gitk --all&amp;'
alias gx='gitx --all'
alias gp='git push'
alias gpo='git push origin'
alias srd='sudo rm -r'
alias gcma='git commit -m -a'
alias ce='cd ~/.emacs.d'
alias cei='cd ~/.emacs.d/init.d/'
alias cee='cd ~/.emacs.d/elpa/'
alias ceg='cd ~/.emacs.d/el-get/'
alias cy='cd ~/gh/yefeiyu.github.io'
alias ca='cd ~/gh/yefeiyu.github.io/_app/'
alias caa='cd ~/gh/yefeiyu.github.io/_app/_data/'
alias cad='cd ~/gh/yefeiyu.github.io/_app/_drafts/'
alias cai='cd ~/gh/yefeiyu.github.io/_app/_includes/'
alias cal='cd ~/gh/yefeiyu.github.io/_app/_layouts/'
alias cao='cd ~/gh/yefeiyu.github.io/_app/_org/'
alias cam='cd ~/gh/yefeiyu.github.io/_app/_md/'
alias cag='cd ~/gh/yefeiyu.github.io/_app/_pages/'
alias cap='cd ~/gh/yefeiyu.github.io/_app/_posts/'
alias cs='cd ~/gh/yefeiyu.github.io/_site/'
alias cprs='cp -r  ~/gh/yefeiyu.github.io/_site/* ~/gh/yefeiyu.github.io/ '

alias js='jekyll serve'
alias gs='grunt serve'
alias bl='bash --login'
alias lsfa='ls -Fa'
alias gapm='ga . &amp;&amp; gcma . &amp;&amp; gpo master'
alias xmd='xmodmap ~/.Xmodmaprc'

alias rgs='sudo rm -r ~/gh/yefeiyu.github.io/_site 404.html email fu robots.txt about email-signup index.html search apple-touch-icon.png favicon.ico it sitemap.xml archives favicon.svg life soft art feed.json mobile tags assets feed.xml news zza attitude fiction review &amp;&amp; grunt serve'
#&amp;&amp; sudo rm -r  ~/gh/yefeiyu.github.io/about &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/art &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/email* &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/fu &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/it &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/life &amp;&amp; sudo rm -r ~/gh/yefeiyu.github.io/news &amp;&amp; sudo rm ~/gh/yefeiyu.github.io/*.html &amp;&amp; sudo rm *.txt 
alias rjs='sudo rm -r ~/gh/yefeiyu.github.io/_site &amp;&amp; sudo rm ~/gh/yefeiyu.github.io/*.html &amp;&amp; jekyll serve'
alias cgm='cp -r  _site/* . &amp;&amp; git add . &amp;&amp; git commit -m -a . &amp;&amp; git push origin master'

alias ec='emacsclient'
alias sec='sudo emacsclient'
##;;alias lsd='ls ~/gh/yefeiyu.github.io/_app/_drafts/'
##alias mvd='mv ~/gh/yefeiyu.github.io/_app/_drafts/*'
##alias mvda='mv ~/gh/yefeiyu.github.io/_app/_drafts/'
##alias cmp='mv ~/gh/yefeiyu.github.io/_app/_org/* ~/gh/yefeiyu.github.io/org/ &amp;&amp; cd ~/gh/yefeiyu.github.io/_app/_posts/ &amp;&amp; cp ~/gh/yefeiyu.github.io/_app/_drafts/*.md ~/gh/yefeiyu.github.io/_app/_posts'
##alias rmd='rm ~/gh/yefeiyu.github.io/_app/_drafts/* &amp;&amp; cd ~/gh/yefeiyu.github.io/'

alias cdp='cd ~/gh/yefeiyu.github.io/_app/_posts/ &amp;&amp; cp ~/gh/yefeiyu.github.io/_app/_drafts/*.html ~/gh/yefeiyu.github.io/_app/_posts'
alias rmd='rm ~/gh/yefeiyu.github.io/_app/_drafts/* &amp;&amp; cd ~/gh/yefeiyu.github.io/'

alias cdd='cd ~/download'
alias caii='cd ~/gh/yefeiyu.github.io/_app/_includes/themes/curtana/includes'
alias cail='cd ~/gh/yefeiyu.github.io/_app/_includes/themes/curtana/layouts'
alias cas='cd ~/gh/yefeiyu.github.io/_app/assets/'
alias casj='cd ~/gh/yefeiyu.github.io/_app/assets/themes/curtana/_js'
alias casl='cd ~/gh/yefeiyu.github.io/_app/assets/themes/curtana/_less'
alias cb='cd ~/gh/yefeiyu.github.io/_amsf/core/_app/'
alias cbs='cd ~/gh/yefeiyu.github.io/_amsf/core/_app/assets'
alias cbsj='cd ~/gh/yefeiyu.github.io/_amsf/core/_app/assets/themes/curtana/_js'
alias cbsl='cd ~/gh/yefeiyu.github.io/_amsf/core/_app/assets/themes/curtana/_less'

alias cpl='cd ~/gh/yefeiyu.github.io/_app/_posts/life/'
alias cps='cd ~/gh/yefeiyu.github.io/_app/_posts/soft/'
alias cpa='cd ~/gh/yefeiyu.github.io/_app/_posts/act/'
alias cpf='cd ~/gh/yefeiyu.github.io/_app/_posts/fiction/'
alias cpo='cd ~/gh/yefeiyu.github.io/_app/_posts/love/'
alias cpm='cd ~/gh/yefeiyu.github.io/_app/_posts/memo/'
alias cpr='cd ~/gh/yefeiyu.github.io/_app/_posts/reader/'
alias cpv='cd ~/gh/yefeiyu.github.io/_app/_posts/review/'
alias cpz='cd ~/gh/yefeiyu.github.io/_app/_posts/zza/'
alias cpzl='cd ~/gh/yefeiyu.github.io/_app/_posts/zzl/'
alias rmf='sudo rm -rf'
# alias cid='cp /home/xx/Dropbox/ygi/md/* ~/gh/yefeiyu.github.io/_app/_drafts/ &amp;&amp; cd ~/gh/yefeiyu.github.io/_app/_drafts/'
alias cod='cp ~/gh/yefeiyu.github.io/_app/_org/*.md ~/gh/yefeiyu.github.io/_app/_drafts/ &amp;&amp; cd ~/gh/yefeiyu.github.io/_app/_drafts/'
alias eba='e ~/.bash_aliases'
alias sba='source ~/.bash_aliases'
alias cdr='cd ~/Dropbox'
# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors &amp;&amp; eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# colored GCC warnings and errors
export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'

# some more ls aliases
alias ll='ls -l'
alias la='ls -A'
alias l='ls -CF'
#use ec as alias for emacs client
alias ec='emacsclient -t -a ""'
alias e='emacsclient'
#use emacs as default editor
export EDITOR="e"

alias edu='e ~/Dropbox/log-usr'
alias sas='sudo apt-cache search'
alias sai='sudo apt-get install'
alias sau='sudo apt-get update'

alias cg='cd ~/gh'
alias ey='e _config.yml'
alias px='proxychains4'
alias cr='sudo cp -r'
</pre>
<p>
$ source .bash_aliases 使上述配置生效。
如此，整个流程简化为：
<code>C-x j i</code> 建一篇新文章 ::emacs
 <code>C-x j p</code> 将org转化成html ::emacs
<code>$ cy</code> 进入博客根目录 ::term
<code>$ gs</code> 生成站点文件 ::term
<code>$ cgm</code> 发布到github ::term
祝 使用愉快。
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
本部分和后面凡带有 <code>\%</code> 注释的，在实际使用时都需去掉 <code>\</code> 
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<footer>
  <p>Author: yefeiyu <a aria-label="Follow @yefeiyu on GitHub" data-count-aria-label="# followers on GitHub" data-count-api="/users/jcouyang#followers" data-count-href="/jcouyang/followers" href="https://github.com/yefeiyu class="github-button">Follow @yefeiyu</a></p>
  <p>Modified: 2022-10-22 Sat 16:50</p>
  <p>Generated by: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.1 (<a href="https://orgmode.org">Org</a> mode 9.5.3) &#215; <a href="https://github.com/jcouyang/orgpress">OrgPress</a></p>
</footer>
</div>
</body>
</html>
